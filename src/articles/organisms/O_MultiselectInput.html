<!DOCTYPE html>
<html lang="ru" dir="ltr">
  <head>
    <metatags></metatags>
    <title>Компонент O_MultiselectInput | ADC Code Tutorial</title>
    <analytics></analytics>
  </head>

  <body class="article">
    <menubar></menubar>

    <div class="contentAreaWrapper">
      <menu class="sidebar">
        <a href="#initiation">Введение</a>
        <a href="#structure">Струтура компонента</a>
        <a href="#state">Состояние компонента</a>
        <a href="#realization">Реализация</a>
        <a href="#links">Ссылки</a>
      </menu>

      <article>
        <figure class="articleCover O_MultiselectInput"></figure>

        <h1 id="initiation">Multiselect Input</h1>
        <p>
          Multiselect Input это вид компонента select, который позволяет
          пользователю выбрать несколько пунктов из option list.
        </p>
        <p>
          В&nbsp;основном multiselect input используют в&nbsp;различных формах
          входа&nbsp;или&nbsp;заполнения данных, когда нужно сделать
          множественный выбор при поиске по&nbsp;тегам или фильтрации.
        </p>

        <h2 id="structure">Структура компонента</h2>
        <p>
          Multiselect input состоит из&nbsp;<a href="/atoms/A_Input.html"
            >input</a
          >
          с предзаполненным placeholder,
          <a href="/atoms/A_OptionItem.html">option item</a> который необходимо
          выбрать&nbsp;и, в&nbsp;выбранном состоянии,
          <a href="/atoms/A_Chip.html">chip.</a>
          Подробнее про основную структуру
          <a href="/organisms/O_Select.html">select.</a>
        </p>

        <img
          srcset="
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-6.png,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-6@2x.png 2x,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-6@3x.png 3x
          "
          src="../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-1.png"
          alt="Структура чипса"
        />

        <h3>Chip</h3>
        <p>
          Основа отличия multiselect input от&nbsp;обычного
          <a href="/organisms/O_SelectInput.html">select input</a> в&nbsp;том,
          что&nbsp;выбранные строки из&nbsp;option list выводятся в&nbsp;input
          в&nbsp;виде chip. Эти&nbsp;элементы отображают выбранный контент
          и&nbsp;имеют иконку удаления.
        </p>

        <img
          srcset="
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-1.png,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-1@2x.png 2x,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-1@3x.png 3x
          "
          src="../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-1.png"
          alt="Структура чипса"
        />

        <h2 id="state">Состояние компонента</h2>

        <p>
          Исходя из&nbsp;структуры, мы&nbsp;можем выявить несколько состояний
          компонента с данными и&nbsp;без них. Заполненный
          <a href="/atoms/A_Input.html">input</a> отображает не&nbsp;строку, а
          отдельный компонент или несколько компонентов в&nbsp;виде
          <a href="/atoms/A_Chip.html">chip</a>. Multiselect input изменяется
          следующим образом:
        </p>

        <img
          srcset="
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-4.png,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-4@2x.png 2x,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-4@3x.png 3x
          "
          src="../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-4.png"
          alt="Структура чипса"
        />
        <p>
          Затем в&nbsp;выбранном состоянии появляется chip. Так как выбираемая
          строка может быть слишком длинной, чтобы поместиться в&nbsp;input
          целиком, мы ограничиваем максимальную длину chip и&nbsp;срезаем
          выбранный текст.
        </p>

        <img
          srcset="
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-5.png,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-5@2x.png 2x,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-5@3x.png 3x
          "
          src="../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-5.png"
          alt="Структура чипса"
        />

        <p>
          Количество строк в&nbsp;опции может быть большим, соответственно
          и&nbsp;выбранных chip будет много. Проблема размещения этих
          компонентов в&nbsp;input решается таким образом.
        </p>

        <img
          srcset="
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-2.png,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-2@2x.png 2x,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-2@3x.png 3x
          "
          src="../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-2.png"
          alt="Структура чипса"
        />

        <h2 id="realization">Реализация</h2>

        <p>
          Компонент должен принимать параметры: placeholder, current selection,
          option list. Также мы прописываем его функциональность при выборе
          элемента списка и когда уже из input мы удаляем выбранный chip.
          Особенность этого компонента в том, что при выборе строки из массива
          option list мы переносим ее в массив с chip.
        </p>

        <pre><code class="language-js">import React, { PureComponent } from 'react'
import A_Input from '../../atoms/A_Input/A_Input.jsx'
import A_Chip from '../../atoms/A_Chip/A_Chip.jsx'
import A_OptionItem from '../../atoms/A_OptionItem/A_OptionItem.jsx'
import './O_MultiselectInput.css'

export default class O_MultiselectInput extends PureComponent {
  constructor(props) {
    super(props)

    this.state = {
      selectedOptions: [],
      disabled: props.disabled,
      options: props.options,
      showOptions: false
    }
  }

  handleSelectOption = (id) => {
    const selectedOption = this.state.options.find((elem) => elem.id === id)

    if (!selectedOption) {
      return
    }

    const updatedOptions = this.state.options.filter(
      (option) => option.id !== id
    )

    this.setState((prevState) => ({
      ...prevState,
      selectedOptions: [...prevState.selectedOptions, selectedOption],
      options: updatedOptions
    }))
  }

  handleUnselectOption = (id) => {
    const unselectedOption = this.state.selectedOptions.find(
      (elem) => elem.id === id
    )

    if (!unselectedOption) {
      return
    }

    const newSelectedOptions = this.state.selectedOptions.filter(
      (option) => option.id !== id
    )

    this.setState((prevState) => ({
      ...prevState,
      options: [...prevState.options, unselectedOption],
      selectedOptions: newSelectedOptions
    }))
  }

  setVisibleOptions = (visible) => {
    if (this.state.disabled) {
      return
    }

    this.setState((preState) => ({
      ...preState,
      showOptions: visible
    }))
  }

  render() {
    const { selectedOptions, options, showOptions } = this.state
    const { placeholder } = this.props

    const optionElements = options.map((option) => (
      &lt;A_OptionItem
        key={option.id}
        id={option.id}
        value={option.value}
        onSelect={this.handleSelectOption}
      /&gt;
    ))

    const chips = selectedOptions.map((option) => (
      &lt;A_Chip
        key={option.id}
        text={option.value}
        handleClick={() => {
          this.handleUnselectOption(option.id)
        }}
      /&gt;
    ))

    const optionCollection = (
      &lt;div className="C_OptionsList"&gt;{optionElements}&lt;/div&gt;
    )

    return (
      &lt;div className="O_MultiselectInput"&gt;
        &lt;A_Input
          onFocus={() => this.setVisibleOptions(true)}
          disabled={options.length === 0}
          placeholder={placeholder}
        &gt;
          {chips}
        &lt;/A_Input&gt;

        {showOptions && optionCollection}
      &lt;/div&gt;
    )
  }
}</code></pre>

        <p>
          Затем прописываем стили для multiselect input и&nbsp;задаем среду
          для&nbsp;остальных компонентов, которые используем. Подробнее про
          <a href="/general/isolation.html"> проектирование в&nbsp;изоляции</a>
          можешь прочитать тут.
        </p>

        <pre><code class="language-css">.O_MultiselectInput {
   box-shadow: 9px 9px 35px rgba(0, 0, 0, 0.09);
  margin: 20% auto;
  width: 610px;
  border-radius: 10px;
}

.O_MultiselectInput .C_OptionsList {
  margin-top: -15px;
  background-color: #fff f;
  padding: 20px 20px 20px 20px;
}

.O_MultiselectInput .A_Chip {
  margin: 4px 4px;
}

.O_MultiselectInput .A_InputContainer {
  box-shadow: none;
  flex-wrap: nowrap;
  flex-direction: row;
}</code></pre>

        <p>
          Мы&nbsp;создали компонент, но&nbsp;описали только его функционал,
          теперь его&nbsp;нужно отрендерить. Попробуй теперь этот компонент
          вывести согласно своей структуре проекта. Ты можешь увидеть как это
          делаем мы, а также посмотреть получившийся
          <a
            target="_blank"
            href="https://codetutorial-system.adc.ac/example_7/example_7.html"
            >multiselect input</a
          >.
        </p>

        <pre><code class="language-js">import React from 'react'
import ReactDOM from 'react-dom'
import O_MultiselectInput from '../../components/organisms/O_MultiselectInput/O_MultiselectInput.jsx'

const options = [
  {
    id: '1',
    value: 'Айва'
  },
  {
    id: '2',
    value: 'Абрикос'
  },
  {
    id: '3',
    value: 'Ананас'
  },
  {
    id: '4',
    value: 'Манго'
  },
  {
    id: '5',
    value: 'Азимина трехлопастная'
  },
  {
    id: '6',
    value: 'Айва бенгальская'
  }
]

document.addEventListener('DOMContentLoaded', () => {
  ReactDOM.render(
    &lt;O_MultiselectInput placeholder="Выбери фрукт" options={options} /&gt;,
    document.body
  )
})</code></pre>

        <p>
          Получаем следующий результат в&nbsp;виде input, на&nbsp;который можно
          нажать и&nbsp;провзаимодействовать, выбрать chips или удалить его
          из&nbsp;input.
        </p>
        <img
          srcset="
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-7.png,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-7@2x.png 2x,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-7@3x.png 3x
          "
          src="../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-7.png"
          alt="Готовый компонент 1"
        />
        <img
          srcset="
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-8.png,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-8@2x.png 2x,
            ../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-8@3x.png 3x
          "
          src="../../images/organism/O_MultiselectInput/O_MultiselectInput-content-image-8.png"
          alt="Готовый компонент 2"
        />

        <links></links>

        <h2>Составляющие</h2>

        <p>
          В этот компонент часто выводятся следующие компоненты.
        </p>

        <div class="suggest">
          <a href="/atoms/A_Chip.html">
            <figure class="suggestCover A_Chip"></figure>
            <h4>Chip</h4>
            <p>Интерактивный элемент множественного выбора.</p>
          </a>
          <a href="/atoms/A_OptionItem.html">
            <figure class="suggestCover A_OptionItem"></figure>
            <h4>Option Item</h4>
            <p>Функциональный элемент выпадающего спасска.</p>
          </a>
        </div>

        <p>
          Этот компонент часто выводится в следующие компоненты.
        </p>

        <div class="suggest">
          <a href="/organisms/O_SingIn.html">
            <figure class="suggestCover O_SingIn"></figure>
            <h4>Sing in</h4>
            <p>Стандартная форма входа в какое-либо приложение или сервис.</p>
          </a>

          <a href="/organisms/O_Alert.html">
            <figure class="suggestCover O_ModalAlert"></figure>
            <h4>Modal Alert</h4>
            <p>
              Всплывающее модальное интерактивное окно различного назначения.
            </p>
          </a>
        </div>
      </article>
    </div>

    <footerbar></footerbar>
  </body>
</html>
